(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/user-card/user-card"],{"0266":function(t,e,o){"use strict";(function(t){var n=o("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n(o("2eee")),a=n(o("c973")),l={name:"user-card",props:{nicknameColor:{type:String,default:"#333"},nicknameFontSize:{type:String,default:"30rpx"},attrShow:{type:Boolean,default:!0},bottomText:{type:String,default:null},bottomTime:{type:Number||String,default:null},avatarSize:{type:String,default:"100rpx"},showFollowButton:{type:Boolean,default:!1},highlight:{type:Boolean,default:!1},publishDate:{type:Number,default:null},bottomTextShow:{type:Boolean,default:!0},distanceShow:{type:Boolean,default:!0},distanceInShow:{type:Boolean,default:!0},ovoUserInfo:{type:Object,default:{emotionalOrientationList:[{code:"sapiosexual",genderLimit:-1,id:1,name:"加载中",sexualOrientationLimit:!1}],gmtCreate:1685810183318,gmtModified:1685811147296,id:16,introduction:"",sadomasochismAttrCode:"加载中",sexualOrientationCode:"加载中",user:{birthday:288e5,fileIdOfAvatar:null,gmtCreate:1685797143441,gmtModified:1685811147275,id:424594399051781,nickname:"加载中...",roles:[{code:"user",gmtCreate:1681730486e3,gmtModified:1681145855686,id:3,name:"普通用户"}]},location:{longitude:0,latitude:0,country:null,province:null,city:null},userId:424594399051781}}},data:function(){var t=this.$ovo.getSexualOrientationMap();return{textOpcaity:1,sexualOrientationMap:t,sexualOrientationName:"",sadomasochismAttrName:"",age:0,distance:null,distanceText:"",userSelf:{location:{longitude:0,latitude:0,country:null,province:null,city:null}},locationText:"",hasPosition:!1,toShowDistanceOpt:!1,publishDateText:""}},created:function(){},mounted:function(){var e=this;t.$on("changeOvoSelfInfo",(function(t){e.userSelf=t,e.locationOpt()})),t.$on("changeSexualOrientationMap",(function(t){e.sexualOrientationName=e.$ovo.toSexualOrientationPlus(e.ovoUserInfo.sexualOrientationCode,e.ovoUserInfo.user.gender)})),t.$on("changeSadomasochismAttrMap",(function(t){e.sadomasochismAttrName=e.$ovo.getSadomasochismAttrMap()[e.ovoUserInfo.sadomasochismAttrCode]}))},methods:{toDateText:function(t){var e=(new Date).getTime();if(e-t<6e4)return"刚刚";if(e-t<3e5)return"5分钟前";if(e-t<36e5)return"几分钟前";var o=new Date(e),n=new Date(t);return o.getFullYear()==n.getFullYear()&&o.getMonth()==n.getMonth()&&o.getDate()==n.getDate()?this.$kt.util.dateFromat(t,"hh:mm"):o.getFullYear()==n.getFullYear()&&o.getMonth()==n.getMonth()&&o.getDate()-n.getDate()==1?"昨天 "+this.$kt.util.dateFromat(t,"hh:mm"):o.getFullYear()==n.getFullYear()&&o.getMonth()==n.getMonth()?this.$kt.util.dateFromat(t,"MM-dd hh:mm"):this.$kt.util.dateFromat(t,"yyyy-MM-dd hh:mm")},openSetting:function(){var e=this;t.openSetting({success:function(t){t.authSetting["scope.userLocation"]&&e.$ovo.getLocation()}})},toShowDistanceClick:function(){var e=this;this.toShowDistanceOpt=!0,setTimeout((function(){e.toShowDistanceOpt=!1}),500),t.getSetting({success:function(t){console.log(t),null==t.authSetting["scope.userLocation"]||t.authSetting["scope.userLocation"]?e.$ovo.getLocation():e.openSetting()}})},click:function(){var t=this;return(0,a.default)(i.default.mark((function e(){return i.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){setTimeout((function(){t.$emit("click"),e("")}),10)}));case 2:if(console.log("cardClick",t.toShowDistanceOpt),!t.toShowDistanceOpt){e.next=5;break}return e.abrupt("return",!1);case 5:t.textOpcaity=.5,setTimeout((function(){t.textOpcaity=1}),500);case 7:case"end":return e.stop()}}),e)})))()},getDistance:function(t,e,o,n){var i=t*Math.PI/180,a=o*Math.PI/180,l=e*Math.PI/180,s=n*Math.PI/180,u=i-a,r=l-s,c=2*Math.asin(Math.sqrt(Math.pow(Math.sin(u/2),2)+Math.cos(i)*Math.cos(a)*Math.pow(Math.sin(r/2),2))),h=6378137*c;return h=Math.round(1e4*h)/1e4,h},getDistanceText:function(t){return t<1?"1m":t<1e3?(t=parseInt(t),t+"m"):(t/1e3).toFixed(1)+"km"},getLocationText:function(t){return null==t||void 0==t?"未知":null!=t.city?t.city:null!=t.province?t.province:null!=t.country?t.country:"未知"},locationOpt:function(){this.locationText=this.getLocationText(this.ovoUserInfo.location),null!=this.ovoUserInfo.location&&null!=this.ovoUserInfo.location.latitude&&null!=this.ovoUserInfo.location.longitude&&(this.hasPosition=!0),null!=this.ovoUserInfo.location&&null!=this.ovoUserInfo.location.latitude&&null!=this.ovoUserInfo.location.longitude&&null!=this.userSelf.location&&null!=this.userSelf.location.latitude&&null!=this.userSelf.location.longitude&&(this.distance=this.getDistance(this.ovoUserInfo.location.latitude,this.ovoUserInfo.location.longitude,this.userSelf.location.latitude,this.userSelf.location.longitude),this.distanceText=this.getDistanceText(this.distance)),this.$forceUpdate()},initAge:function(){this.sexualOrientationName=this.$ovo.toSexualOrientationPlus(this.ovoUserInfo.sexualOrientationCode,this.ovoUserInfo.user.gender),this.sadomasochismAttrName=this.$ovo.getSadomasochismAttrMap()[this.ovoUserInfo.sadomasochismAttrCode];var t=new Date(this.ovoUserInfo.user.birthday),e=new Date,o=e.getFullYear()-t.getFullYear();(e.getMonth()<t.getMonth()||e.getMonth()==t.getMonth()&&e.getDate()<t.getDate())&&o--,this.age=o}},watch:{ovoUserInfo:{handler:function(t,e){this.userSelf=this.$ovo.getSelf(),this.initAge(),null!=this.userSelf&&""!=this.userSelf&&null!=this.userSelf.location&&""!=this.userSelf.location&&null!=this.userSelf.location.latitude&&""!=this.userSelf.location.latitude&&this.locationOpt(),this.$forceUpdate()},immediate:!0,deep:!0}}};e.default=l}).call(this,o("543d")["default"])},2052:function(t,e,o){"use strict";o.r(e);var n=o("0266"),i=o.n(n);for(var a in n)["default"].indexOf(a)<0&&function(t){o.d(e,t,(function(){return n[t]}))}(a);e["default"]=i.a},"26a1":function(t,e,o){"use strict";o.r(e);var n=o("3872"),i=o("2052");for(var a in i)["default"].indexOf(a)<0&&function(t){o.d(e,t,(function(){return i[t]}))}(a);o("80a6");var l=o("f0c5"),s=Object(l["a"])(i["default"],n["b"],n["c"],!1,null,"133da9fc",null,!1,n["a"],void 0);e["default"]=s.exports},3872:function(t,e,o){"use strict";o.d(e,"b",(function(){return i})),o.d(e,"c",(function(){return a})),o.d(e,"a",(function(){return n}));var n={avatar:function(){return o.e("components/avatar/avatar").then(o.bind(null,"d690"))}},i=function(){var t=this,e=t.$createElement,o=(t._self._c,t.attrShow&&"1"==t.ovoUserInfo.user.gender?t.$kt.file.byPath("image/icon/gender1.svg"):null),n=t.attrShow&&"1"!=t.ovoUserInfo.user.gender?t.$kt.file.byPath("image/icon/gender0.svg"):null,i=t.attrShow?null!=t.ovoUserInfo.sexualOrientationCode&&""!=t.ovoUserInfo.sexualOrientationCode&&null!=t.ovoUserInfo.emotionalOrientationList&&t.ovoUserInfo.emotionalOrientationList.length>0:null,a=t.attrShow?null!=t.ovoUserInfo.emotionalOrientationList&&t.ovoUserInfo.emotionalOrientationList.length>0:null,l=null!=t.publishDate?t.toDateText(t.publishDate):null,s=null!=t.bottomText&&""!=t.bottomText&&null!=t.bottomTime?t.toDateText(t.bottomTime):null;t.$mp.data=Object.assign({},{$root:{g0:o,g1:n,g2:i,g3:a,m0:l,m1:s}})},a=[]},"80a6":function(t,e,o){"use strict";var n=o("eb24"),i=o.n(n);i.a},eb24:function(t,e,o){}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/user-card/user-card-create-component',
    {
        'components/user-card/user-card-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("26a1"))
        })
    },
    [['components/user-card/user-card-create-component']]
]);
