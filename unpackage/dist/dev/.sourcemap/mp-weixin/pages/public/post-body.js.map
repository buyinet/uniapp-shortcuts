{"version":3,"sources":["uni-app:///main.js","webpack:///E:/Code/Project-5/uni-ovo/pages/public/post-body.vue?6904","webpack:///E:/Code/Project-5/uni-ovo/pages/public/post-body.vue?7c6a","webpack:///E:/Code/Project-5/uni-ovo/pages/public/post-body.vue?1bb8","webpack:///E:/Code/Project-5/uni-ovo/pages/public/post-body.vue?ca18","uni-app:///pages/public/post-body.vue","webpack:///E:/Code/Project-5/uni-ovo/pages/public/post-body.vue?92df","webpack:///E:/Code/Project-5/uni-ovo/pages/public/post-body.vue?ef9a"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","components","auditStatusCodeIsWait","data","statusBarHeight","navHeight","navBarHeight","isPublishing","postId","bodyData","postAtSelect","postCommentData","content","postRequestParam","pageNumber","publishRequestParam","onShowNumber","clearPostAtSelectClick","publishBoxHeight","isPostInit","isPostCommentInit","timeOut","onLoad","uni","title","onShow","mounted","methods","publishBoxHeightSet","inputPublishInput","clearPostAtSelect","toAtPost","clearTimeout","setTimeout","like","indexList","api","commentId","stateSuccess","publish","console","atCommentId","res","ovoUser","copyContent","success","icon","getById","id","resolve","getPostComment","isLikeOpting"],"mappings":";;;;;;;;;;;;;AAAA;AAE4D;AAA4E;AACxI;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAAC;AAG3DC,UAAU,CAACC,iBAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAkI;AAClI;AAC6D;AACL;AACsC;;;AAG9F;AACkL;AAClL,gBAAgB,2LAAU;AAC1B,EAAE,+EAAM;AACR,EAAE,gGAAM;AACR,EAAE,yGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,oGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,wRAEN;AACP,KAAK;AACL;AACA,aAAa,oMAEN;AACP,KAAK;AACL;AACA,aAAa,8LAEN;AACP,KAAK;AACL;AACA,aAAa,8LAEN;AACP,KAAK;AACL;AACA,aAAa,mTAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACxHA;AAAA;AAAA;AAAA;AAAoqB,CAAgB,yrBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eCuJxrB;EACAC;IACAC;EACA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;QACAC;MACA;MACAC;QACAC;MACA;MACAC;QACAH;MACA;MACAI;MACAC;MACAC;MACA;MACAC;MACA;MACAC;MACAC;IACA;EACA;EACAC;IAGA;IAEA;IAEA;IAEA;IAEAC;MACAC;IACA;IACA;IAEAD;IACA;IACA;IACA;IACA;EACA;EACAE,2BAEA;EACA;EACAC;IAAA;IACAH;MACA;MACA;IACA;EACA;EACAI;IACAC;MAAA;MACAL;QACA;QACA;MACA;IACA;IACAM;MACA;IACA;IACAC;MAAA;MACA;MACA;QACA;QACA;MACA;MACA;QACA;MACA;IACA;IACAC;MAAA;MACAC;MACA;MACAC;QACA;MACA;IACA;IACAC;MAAA;MACA;MACA;QACA;UACA;YACA;UACA;UACAC;QACA;MACA;MAEA;QACA;QACAF;UACA;QACA;MACA;MACA;QACAG;QACAjC;UACAkC;QACA;QACAC;UACA;UACA;YACA;cACA;YACA;UACA;UACA;QACA;MACA;IACA;IACAC;MAAA;MACA;QACA;MACA;MACA;QACAC;QACA;MACA;MACA;MACA;QACAJ;QACAjC;UACAK;UACAI;UACA6B;QACA;QACAH;UACA,uEACAI;YACAC;UAAA,GACA;UACA;UACA;UACA;UACA;UACA;UACA;UACAV;YACA;UACA;UAEAA;YACA;UACA;QACA;MACA;IACA;IACA;AACA;AACA;IACAW;MACArB;QACApB;QACA0C;UACAtB;YACAC;YACAsB;UACA;QACA;MACA;IACA;IACAC;MAAA;MAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,OACA;kBAEA;oBACAX;oBACAjC;sBACA6C;oBACA;oBACAV;sBACA;sBACAf;sBACA;sBACA;sBACA;sBACA0B;oBACA;kBACA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IACAC;MAAA;MAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,OACA;kBACA;oBACAd;oBACAjC;sBACAK;sBACAM;oBACA;oBACAwB;sBACA;sBACA;sBACA;wBACA;sBACA;sBAEA;wBAEA;wBACA;0BACA;4BACA;4BACA;0BACA;wBACA;wBACA,oEACAI;0BACAS;wBAAA,GACA;sBACA;sBAEAlB;wBACA;sBACA;sBAEAgB;oBACA;kBACA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;AClYA;AAAA;AAAA;AAAA;AAA2xC,CAAgB,wvCAAG,EAAC,C;;;;;;;;;;;ACA/yC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/public/post-body.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;;import '@dcloudio/vue-cli-plugin-uni/packages/uni-push/dist/uni-push.es.js';import '@dcloudio/vue-cli-plugin-uni/packages/uni-cloud/dist/index.js';\nimport Vue from 'vue'\nimport Page from './pages/public/post-body.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./post-body.vue?vue&type=template&id=5044fe82&scoped=true&\"\nvar renderjs\nimport script from \"./post-body.vue?vue&type=script&lang=js&\"\nexport * from \"./post-body.vue?vue&type=script&lang=js&\"\nimport style0 from \"./post-body.vue?vue&type=style&index=0&id=5044fe82&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\Application\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5044fe82\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/public/post-body.vue\"\nexport default component.exports","export * from \"-!D:\\\\Application\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\Application\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!D:\\\\Application\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\Application\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\Application\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\Application\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./post-body.vue?vue&type=template&id=5044fe82&scoped=true&\"","var components\ntry {\n  components = {\n    ktNavBar: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uniapp-kantboot/components/kt-nav-bar/kt-nav-bar\" */ \"@/uni_modules/uniapp-kantboot/components/kt-nav-bar/kt-nav-bar.vue\"\n      )\n    },\n    followBtn: function () {\n      return import(\n        /* webpackChunkName: \"components/follow-btn/follow-btn\" */ \"@/components/follow-btn/follow-btn.vue\"\n      )\n    },\n    userPost: function () {\n      return import(\n        /* webpackChunkName: \"components/user-post/user-post\" */ \"@/components/user-post/user-post.vue\"\n      )\n    },\n    userCard: function () {\n      return import(\n        /* webpackChunkName: \"components/user-card/user-card\" */ \"@/components/user-card/user-card.vue\"\n      )\n    },\n    uDivider: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-divider/u-divider\" */ \"@/uni_modules/uview-ui/components/u-divider/u-divider.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 =\n    _vm.isPostInit && _vm.bodyData.auditStatusCode == \"pass\"\n      ? _vm.postCommentData.content.length\n      : null\n  var g1 =\n    _vm.isPostInit &&\n    _vm.bodyData.auditStatusCode == \"pass\" &&\n    g0 == 0 &&\n    _vm.isPostCommentInit\n      ? _vm.$kt.file.byPath(\"image/icon/noHaveComment.svg\")\n      : null\n  var g2 =\n    _vm.isPostInit &&\n    _vm.bodyData.auditStatusCode == \"pass\" &&\n    g0 == 0 &&\n    !_vm.isPostCommentInit\n      ? _vm.$kt.file.byPath(\"kantboot/icon/loading.svg\")\n      : null\n  var l0 =\n    _vm.isPostInit && _vm.bodyData.auditStatusCode == \"pass\"\n      ? _vm.__map(_vm.postCommentData.content, function (item, index) {\n          var $orig = _vm.__get_orig(item)\n          var g3 = item.like\n            ? _vm.$kt.file.byPath(\"image/icon/likeFill.svg\")\n            : null\n          var g4 = !item.like\n            ? _vm.$kt.file.byPath(\"image/icon/like.svg\")\n            : null\n          return {\n            $orig: $orig,\n            g3: g3,\n            g4: g4,\n          }\n        })\n      : null\n  var g5 =\n    _vm.bodyData.auditStatusCode == \"pass\" ? _vm.$kt.util.rpxToPx(\"40\") : null\n  var g6 =\n    _vm.bodyData.auditStatusCode == \"pass\" &&\n    _vm.publishRequestParam.content != \"\" &&\n    _vm.publishRequestParam.content != null &&\n    !_vm.isPublishing\n      ? _vm.$kt.file.byPath(\"image/icon/send.svg\")\n      : null\n  var g7 =\n    _vm.bodyData.auditStatusCode == \"pass\" &&\n    !(\n      _vm.publishRequestParam.content != \"\" &&\n      _vm.publishRequestParam.content != null &&\n      !_vm.isPublishing\n    )\n      ? _vm.$kt.file.byPath(\"image/icon/send.svg\")\n      : null\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n        g1: g1,\n        g2: g2,\n        l0: l0,\n        g5: g5,\n        g6: g6,\n        g7: g7,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\Application\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\Application\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\Application\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\Application\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\Application\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./post-body.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\Application\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\Application\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\Application\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\Application\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\Application\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./post-body.vue?vue&type=script&lang=js&\"","<template>\n  <view>\n    <kt-nav-bar title=\"帖子详情\" :showBack=\"true\">\n      <follow-btn :ovoUserInfo=\"bodyData.ovoUser\" />\n    </kt-nav-bar>\n    <scroll-view v-if=\"isPostInit\" scroll-y @scrolltolower=\"getPostComment()\" :style=\"'height:calc(100vh - ' +\n      navBarHeight +\n      'px - ' + publishBoxHeight + 'px);' +\n      'padding:20rpx;box-sizing:border-box;'\n      \">\n      <user-post :mode=\"'body'\" :bodyData=\"bodyData\"></user-post>\n\n      <auditStatusCodeIsWait v-if=\"bodyData.auditStatusCode == 'wait'\">\n      </auditStatusCodeIsWait>\n\n\n      <!-- 评论列表 -->\n      <view v-if=\"bodyData.auditStatusCode == 'pass'\" class=\"box\">\n        <view style=\"height: 10rpx\"></view>\n        <view style=\"font-weight: bold; font-size: 32rpx\">\n          评论\n          <text v-if=\"bodyData.commentCount > 0\">({{ bodyData.commentCount }})</text>\n          <text v-if=\"bodyData.commentCount == 0\">(暂无评论)</text>\n        </view>\n        <view>\n          <view v-if=\"postCommentData.content.length == 0\" style=\"text-align: center;color:#999;font-size: 28rpx;\">\n            <view style=\"height: 100rpx;\"></view>\n            <view>\n              <image v-if=\"isPostCommentInit\" :src=\"$kt.file.byPath('image/icon/noHaveComment.svg')\" mode=\"widthFix\"\n                style=\"width: 200rpx;opacity: .3;\" />\n              <image v-if=\"!isPostCommentInit\" :src=\"$kt.file.byPath('kantboot/icon/loading.svg')\" mode=\"widthFix\"\n                class=\"loading-icon\" />\n            </view>\n            <view>\n              <text v-if=\"isPostCommentInit\">暂无评论~</text>\n            </view>\n          </view>\n          <view style=\"height: 50rpx;\"></view>\n        </view>\n\n\n        <view style=\"height: 10rpx\"></view>\n        <view v-for=\"(item, index) in postCommentData.content\" :key=\"index\" style=\"margin-bottom: 20rpx\">\n          <user-card avatarSize=\"70rpx\" nicknameColor=\"#999\" nicknameFontSize=\"28rpx\" :bottomTime=\"item.gmtCreate\"\n            :attrShow=\"false\" :bottomTextShow=\"false\" :bottomText=\"item.content\" :ovoUserInfo=\"item.ovoUser\"></user-card>\n\n          <view v-if=\"item.atComment != null\" style=\"\n          position: relative;\n          padding:20rpx;background-color:#f5f5f5;margin-top:20rpx;border-radius: 10rpx;margin-bottom: 20rpx;\">\n            <view style=\"font-size: 26rpx;color:#999;text-align: center;\">被回复的帖子</view>\n            <user-card avatarSize=\"70rpx\" nicknameColor=\"#999\" nicknameFontSize=\"28rpx\"\n              :bottomTime=\"item.atComment.gmtCreate\" :attrShow=\"false\" :bottomTextShow=\"false\"\n              :ovoUserInfo=\"item.atComment.ovoUser\" :bottomText=\"item.atComment.content\"></user-card>\n\n\n          </view>\n\n\n          <view style=\"text-align: right;\">\n            <view style=\"display: inline-block;float:left;font-size: 24rpx;color:#666;\">\n              <view style=\"height: 10rpx;\"></view>\n              <text class=\"text-btn\">举报</text>\n              <text class=\"text-btn\" @click=\"copyContent(item.content)\" style=\"margin-left: 20rpx;\">复制内容</text>\n            </view>\n\n            <view style=\"display: inline-block;font-size: 28rpx;\" :style=\"{\n              opacity: item.isLikeOpting ? '.3' : '1'\n            }\" @click=\"like(item.id)\" class=\"text-btn\">\n              <image :src=\"item.like ?\n                $kt.file.byPath('image/icon/likeFill.svg') :\n                $kt.file.byPath('image/icon/like.svg')\" mode=\"widthFix\" style=\"width: 35rpx; height: 35rpx;\"></image>\n              <text v-if=\"item.likeCount > 0\" :style=\"{\n                color: item.like ? '#ff6781' : '#333333',\n                'verticalAlign': 'top'\n              }\" style=\"margin-left: 5rpx;\">{{ item.likeCount }}</text>\n\n            </view>\n\n            <view style=\"display: inline-block; margin-left: 20rpx;color:#666;font-size: 28rpx;\n              vertical-align: top;\n              \" @click=\"toAtPost(item)\" class=\"text-btn\">\n              回复\n            </view>\n\n            <u-divider></u-divider>\n\n          </view>\n        </view>\n        <view style=\"height: 50rpx;\"></view>\n      </view>\n    </scroll-view>\n    <view v-if=\"bodyData.auditStatusCode == 'pass'\" id=\"publishBox\" style=\"\n          position: fixed;\n          width: 100%;\n          bottom: 0;\n          padding: 20rpx;\n          background-color: #fff;\n          box-sizing: border-box;\n          \">\n      <view style=\"position: relative;\n        width: 100%;\n        \">\n        <view style=\" background-color: #f5f5f5;display: inline-block;\n        psition: relative;\n        padding: 20rpx;\n        border-radius: 20rpx;\n        \">\n          <view v-if=\"postAtSelect != null\" @click=\"clearPostAtSelect\" :style=\"{\n            'opacity': clearPostAtSelectClick == 1 ? '.3' : '1'\n          }\" style=\"overflow: hidden;white-space: nowrap;width: 560rpx;\n        font-size: 28rpx;\n        color:#666;padding: 5rpx 0 15rpx 0;\">\n            {{\n              postAtSelect != null ?\n              \"回复 \" + postAtSelect.ovoUser.user.nickname + ': ' + postAtSelect.content : \"\" }}\n          </view>\n          <textarea @input=\"inputPublishInput\" :autoHeight=\"true\" style=\"\n          width: 580rpx;\n          font-size: 28rpx;\n          max-height: 200rpx;\n          \" v-model=\"publishRequestParam.content\" :cursor-spacing=\"$kt.util.rpxToPx('40')\" :placeholder=\"'说点什么吧！'\" />\n        </view>\n        <image class=\"btn\"\n          v-if=\"publishRequestParam.content != '' && publishRequestParam.content != null && !isPublishing\"\n          @click=\"publish()\" style=\"\n            position: absolute;\n            right: 20rpx;\n            top:50%;\n            transform:translateY(-50%);\n            width: 50rpx;\n            height: 50rpx;\" :src=\"$kt.file.byPath('image/icon/send.svg')\" mode=\"widthFix\" />\n\n\n        <image class=\"btn\" v-else @click=\"publish()\" style=\"\n          opacity:.3;\n            position: absolute;\n            right: 20rpx;\n            top:50%;\n            transform:translateY(-50%);\n            width: 50rpx;\n            height: 50rpx;\" :src=\"$kt.file.byPath('image/icon/send.svg')\" mode=\"widthFix\" />\n      </view>\n\n    </view>\n\n  </view>\n</template>\n\n<script>\nimport auditStatusCodeIsWait from './inPostBody/auditStatusCodeIsWait.vue'\n\nexport default {\n  components: {\n    auditStatusCodeIsWait\n  },\n  data() {\n    return {\n      statusBarHeight: uni.getSystemInfoSync().statusBarHeight,\n      navHeight: 48,\n      navBarHeight: 48,\n      isPublishing: false,\n      postId: \"\",\n      bodyData: {},\n      postAtSelect: null,\n      postCommentData: {\n        content: [],\n      },\n      postRequestParam: {\n        pageNumber: 1,\n      },\n      publishRequestParam: {\n        content: \"\"\n      },\n      onShowNumber: 0,\n      clearPostAtSelectClick: 0,\n      publishBoxHeight: 0,\n      // 帖子信息是否加载完毕\n      isPostInit: false,\n      // 帖子评论是否加载完毕\n      isPostCommentInit: false,\n      timeOut: null,\n    };\n  },\n  onLoad(options) {\n\n\n    this.navHeight = 44;\n    // #ifdef MP-WEIXIN\n    this.navHeight = uni.getSystemInfoSync().system.indexOf(\"ios\") != -1 ? 44 : 48;\n    // #endif\n    this.navBarHeight = this.statusBarHeight - -this.navHeight;\n\n    this.postId = options.postId;\n\n    uni.showLoading({\n      title: '加载中'\n    });\n    this.getById(this.postId);\n\n    uni.hideLoading();\n    // this.getPostComment();\n    this.postCommentData.content = [];\n    this.postRequestParam.pageNumber = 1;\n    this.getPostComment();\n  },\n  onShow() {\n\n  },\n  // 初始化\n  mounted() {\n    uni.createSelectorQuery().in(this).select('#publishBox').boundingClientRect((rect) => {\n      // console.log('元素高度为：' + rect.height)\n      this.publishBoxHeight = rect.height;\n    }).exec();\n  },\n  methods: {\n    publishBoxHeightSet() {\n      uni.createSelectorQuery().in(this).select('#publishBox').boundingClientRect((rect) => {\n        // console.log('元素高度为：' + rect.height)\n        this.publishBoxHeight = rect.height;\n      }).exec();\n    },\n    inputPublishInput(e) {\n      this.publishBoxHeightSet();\n    },\n    clearPostAtSelect() {\n      this.clearPostAtSelectClick++;\n      if (this.clearPostAtSelectClick > 1) {\n        this.postAtSelect = null;\n        this.clearPostAtSelectClick = 0;\n      }\n      this.timOut = setTimeout(() => {\n        this.clearPostAtSelectClick = 0;\n      }, 3000);\n    },\n    toAtPost(item) {\n      clearTimeout(this.timOut);\n      this.postAtSelect = item;\n      setTimeout(() => {\n        this.publishBoxHeightSet();\n      }, 100);\n    },\n    like(commentId) {\n      var indexList = [];\n      for (var i = 0; i < this.postCommentData.content.length; i++) {\n        if (this.postCommentData.content[i].id == commentId) {\n          if (this.postCommentData.content[i].isLikeOpting) {\n            return false;\n          }\n          indexList.push(i);\n        }\n      }\n\n      for (var i = 0; i < indexList.length; i++) {\n        this.postCommentData.content[indexList[i]].isLikeOpting = true;\n        setTimeout(() => {\n          this.postCommentData.content[indexList[i]].isLikeOpting = false;\n        }, 1000);\n      }\n      this.$kt.request.request({\n        api: this.$api.business.ovo.postComment.like,\n        data: {\n          commentId,\n        },\n        stateSuccess: (res) => {\n          var item = res.data;\n          for (var i = 0; i < this.postCommentData.content.length; i++) {\n            if (this.postCommentData.content[i].id == item.id) {\n              this.postCommentData.content[i] = item;\n            }\n          }\n          this.$forceUpdate();\n        },\n      });\n    },\n    publish() {\n      if (this.isPublishing) {\n        return false;\n      }\n      if (this.publishRequestParam.content == null || this.publishRequestParam.content == \"\") {\n        console.log(\"没有内容\");\n        return false;\n      }\n      this.isPublishing = true;\n      this.$kt.request.request({\n        api: this.$api.business.ovo.postComment.publish,\n        data: {\n          postId: this.postId,\n          content: this.publishRequestParam.content,\n          atCommentId: this.postAtSelect != null ? this.postAtSelect.id : null,\n        },\n        stateSuccess: (res) => {\n          this.postCommentData.content.unshift({\n            ...res.data,\n            ovoUser: this.$ovo.getSelf()\n          });\n          this.publishRequestParam.content = \"\";\n          this.postAtSelect = null;\n          this.bodyData.commentCount++;\n          this.getById(this.postId);\n          this.$forceUpdate();\n          this.isPublishing = false;\n          setTimeout(() => {\n            this.publishBoxHeightSet();\n          }, 100);\n\n          setTimeout(() => {\n            this.publishBoxHeightSet();\n          }, 1000);\n        },\n      });\n    },\n    /**\n     * 复制内容\n     */\n    copyContent(content) {\n      uni.setClipboardData({\n        data: content,\n        success: function () {\n          uni.showToast({\n            title: \"复制成功\",\n            icon: \"success\",\n          });\n        },\n      });\n    },\n    async getById(id) {\n      await new Promise((resolve) => {\n\n        this.$kt.request.request({\n          api: this.$api.business.ovo.post.getById,\n          data: {\n            id,\n          },\n          stateSuccess: (res) => {\n            this.bodyData = res.data;\n            uni.$emit(\"changeOvoPost\", this.bodyData);\n            this.$forceUpdate();\n            // 帖子信息加载完毕\n            this.isPostInit = true;\n            resolve();\n          },\n        });\n      });\n\n    },\n    async getPostComment() {\n      await new Promise((resolve) => {\n        this.$kt.request.request({\n          api: this.$api.business.ovo.postComment.getByPostId,\n          data: {\n            postId: this.postId,\n            pageNumber: this.postRequestParam.pageNumber,\n          },\n          stateSuccess: (res) => {\n            this.isPostCommentInit = true;\n            this.postRequestParam.pageNumber++;\n            if (res.data.content.length == 0) {\n              this.postRequestParam.pageNumber--;\n            }\n\n            for (var i = 0; i < res.data.content.length; i++) {\n\n              // 如果有重复的\n              for (var j = 0; j < this.postCommentData.content.length; j++) {\n                if (this.postCommentData.content[j].id == res.data.content[i].id) {\n                  this.postCommentData.content[j] = res.data.content[i];\n                  break;\n                }\n              }\n              this.postCommentData.content.push({\n                ...res.data.content[i],\n                isLikeOpting: false\n              });\n            }\n\n            setTimeout(() => {\n              this.publishBoxHeightSet();\n            }, 100);\n\n            resolve();\n          },\n        });\n      });\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.box {\n  padding: 0 20rpx;\n  box-sizing: border-box;\n}\n\n.text-btn:active {\n  opacity: .7;\n}\n\n.btn:active {\n  opacity: .7;\n}\n\n.loading-icon {\n  width: 70rpx;\n  height: 70rpx;\n  filter: invert(90%);\n  // 不停旋转的动画\n  animation: rotate 3s linear infinite;\n}\n\n@keyframes rotate {\n  0% {\n    transform: rotate(0deg);\n  }\n\n  100% {\n    transform: rotate(360deg);\n  }\n}\n</style>\n","import mod from \"-!D:\\\\Application\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\Application\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\Application\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\Application\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\Application\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\Application\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\Application\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\Application\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\Application\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./post-body.vue?vue&type=style&index=0&id=5044fe82&lang=scss&scoped=true&\"; export default mod; export * from \"-!D:\\\\Application\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\Application\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\Application\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\Application\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\Application\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\Application\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\Application\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\Application\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\Application\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./post-body.vue?vue&type=style&index=0&id=5044fe82&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1689839631970\n      var cssReload = require(\"D:/Application/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}